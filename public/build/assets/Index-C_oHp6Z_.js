import{d as W,n as Y,c as C,r as f,a as z,o as r,w as E,b as e,e as l,f as h,t as a,u as V,F as y,i as _,k as u,g as m,v as G,h as c,W as F}from"./app-0xfeTETD.js";import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-Czkn1H1y.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BRkfCIi1.js";import"./index-1Zo7FGYr.js";const J={class:"p-6 min-h-screen bg-background text-foreground"},R={class:"flex items-center justify-between mb-4"},q={class:"flex items-center gap-2"},A={class:"font-medium"},K={key:0,class:"mb-3 rounded border border-amber-400 bg-amber-50 px-3 py-2 text-xs text-amber-800"},P={class:"grid grid-cols-7 gap-px rounded-lg overflow-hidden border bg-border"},Q={class:"flex items-center justify-between"},X={class:"text-xs text-muted-foreground"},Z=["onClick"],tt={class:"mt-2 space-y-1"},et={class:"font-medium"},st={class:"ml-1 text-[11px]"},ot={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40"},nt={class:"w-full max-w-md rounded-xl border border-border bg-card p-4 shadow-xl"},rt={class:"grid gap-2"},dt={class:"text-sm"},lt=["value"],at={class:"text-sm"},it={class:"text-sm"},ut={class:"grid grid-cols-2 gap-2"},mt={class:"text-sm"},pt={class:"text-sm"},ct={class:"text-sm"},bt={class:"text-sm"},gt={class:"mt-4 flex justify-end gap-2"},wt=W({__name:"Index",setup(vt){const x=Y(),S=[{title:"Dashboard",href:"/dashboard"},{title:"Horarios",href:"/horarios"}],U=C(()=>x.props.meetings??[]),$=C(()=>x.props.cursos??[]),w=x.props.flash??{},D=new Date,p=f(new Date(D.getFullYear(),D.getMonth(),1));function L(){const n=new Date(p.value);n.setMonth(n.getMonth()+1),p.value=n}function I(){const n=new Date(p.value);n.setMonth(n.getMonth()-1),p.value=n}function j(n){return n.toLocaleDateString(void 0,{month:"long",year:"numeric"})}function B(n){const t=n.getFullYear(),i=n.getMonth(),s=new Date(t,i,1),b=new Date(t,i+1,0),d=new Date(s);d.setDate(s.getDate()-(s.getDay()+6)%7);const k=new Date(b);k.setDate(b.getDate()+(7-(b.getDay()+6)%7-1));const M=[],v=new Date(d);for(;v<=k;)M.push(new Date(v)),v.setDate(v.getDate()+1);return M}const g=f(!1),o=f({curso_id:"",title:"",description:"",date:"",start_time:"09:00",end_time:"10:00",location:""});function N(n){o.value.date=n.toISOString().slice(0,10),g.value=!0}function T(){const n=`${o.value.date} ${o.value.start_time}`,t=`${o.value.date} ${o.value.end_time}`;F.post("/horarios/meetings",{curso_id:o.value.curso_id,title:o.value.title,description:o.value.description||void 0,start_at:n,end_at:t,location:o.value.location||void 0},{onSuccess:()=>{g.value=!1,o.value={curso_id:"",title:"",description:"",date:"",start_time:"09:00",end_time:"10:00",location:""},F.reload()}})}function O(n){const t=n.toISOString().slice(0,10);return U.value.filter(i=>(i.start_at??"").slice(0,10)===t)}return(n,t)=>(r(),z(H,{breadcrumbs:S},{default:E(()=>{var i;return[e("div",J,[e("div",R,[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold"},"Calendario de reuniones",-1)),e("div",q,[e("button",{class:"px-2 py-1 rounded border",onClick:I},"‹"),e("span",A,a(j(p.value)),1),e("button",{class:"px-2 py-1 rounded border",onClick:L},"›")])]),(i=V(w))!=null&&i.warning?(r(),l("div",K,a(V(w).warning),1)):h("",!0),e("div",P,[t[9]||(t[9]=e("div",{class:"bg-muted p-2 text-xs font-medium text-muted-foreground"},"Lun",-1)),t[10]||(t[10]=e("div",{class:"bg-muted p-2 text-xs font-medium text-muted-foreground"},"Mar",-1)),t[11]||(t[11]=e("div",{class:"bg-muted p-2 text-xs font-medium text-muted-foreground"},"Mié",-1)),t[12]||(t[12]=e("div",{class:"bg-muted p-2 text-xs font-medium text-muted-foreground"},"Jue",-1)),t[13]||(t[13]=e("div",{class:"bg-muted p-2 text-xs font-medium text-muted-foreground"},"Vie",-1)),t[14]||(t[14]=e("div",{class:"bg-muted p-2 text-xs font-medium text-muted-foreground"},"Sáb",-1)),t[15]||(t[15]=e("div",{class:"bg-muted p-2 text-xs font-medium text-muted-foreground"},"Dom",-1)),(r(!0),l(y,null,_(B(p.value),(s,b)=>(r(),l("div",{key:b,class:"bg-card min-h-28 p-2 border-t border-border/50"},[e("div",Q,[e("span",X,a(s.getDate()),1),e("button",{class:"text-xs text-primary hover:underline",onClick:d=>N(s)},"+ Reunión",8,Z)]),e("div",tt,[(r(!0),l(y,null,_(O(s),d=>(r(),l("div",{key:d.id,class:"truncate text-xs rounded bg-primary/10 text-primary px-2 py-1"},[e("span",et,a(d.title),1),e("span",st,a(d.start_at.slice(11,16))+"-"+a(d.end_at.slice(11,16)),1)]))),128))])]))),128))]),g.value?(r(),l("div",ot,[e("div",nt,[t[24]||(t[24]=e("h2",{class:"text-lg font-semibold mb-3"},"Nueva reunión",-1)),e("div",rt,[e("label",dt,[t[17]||(t[17]=u("Curso ")),m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.value.curso_id=s),class:"mt-1 w-full rounded border bg-background p-2"},[t[16]||(t[16]=e("option",{value:""},"Seleccione un curso",-1)),(r(!0),l(y,null,_($.value,s=>(r(),l("option",{key:s.id,value:s.id},a(s.codigo)+" - "+a(s.nombre),9,lt))),128))],512),[[G,o.value.curso_id]])]),e("label",at,[t[18]||(t[18]=u("Título ")),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.title=s),class:"mt-1 w-full rounded border bg-background p-2"},null,512),[[c,o.value.title]])]),e("label",it,[t[19]||(t[19]=u("Fecha ")),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.date=s),type:"date",class:"mt-1 w-full rounded border bg-background p-2"},null,512),[[c,o.value.date]])]),e("div",ut,[e("label",mt,[t[20]||(t[20]=u("Inicio ")),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.start_time=s),type:"time",class:"mt-1 w-full rounded border bg-background p-2"},null,512),[[c,o.value.start_time]])]),e("label",pt,[t[21]||(t[21]=u("Fin ")),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.value.end_time=s),type:"time",class:"mt-1 w-full rounded border bg-background p-2"},null,512),[[c,o.value.end_time]])])]),e("label",ct,[t[22]||(t[22]=u("Lugar / Link ")),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.location=s),class:"mt-1 w-full rounded border bg-background p-2"},null,512),[[c,o.value.location]])]),e("label",bt,[t[23]||(t[23]=u("Descripción ")),m(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.value.description=s),rows:"3",class:"mt-1 w-full rounded border bg-background p-2"},null,512),[[c,o.value.description]])])]),e("div",gt,[e("button",{class:"rounded border px-3 py-1",onClick:t[7]||(t[7]=s=>g.value=!1)},"Cancelar"),e("button",{class:"rounded bg-primary px-3 py-1 text-primary-foreground",onClick:T},"Guardar")])])])):h("",!0)])]}),_:1}))}});export{wt as default};

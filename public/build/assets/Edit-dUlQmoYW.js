import{d as M,n as q,r as E,c as v,q as x,a as z,o as i,w as D,b as d,l as P,g as a,h as p,v as t,e as u,F as c,i as g,u as b,t as l,W as k}from"./app-0xfeTETD.js";import{_ as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-Czkn1H1y.js";import{S as _}from"./sweetalert2.esm.all-ePrzfkxH.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BRkfCIi1.js";import"./index-1Zo7FGYr.js";const N={class:"p-8 bg-background text-foreground min-h-screen"},R=["value"],F=["disabled"],L=["value"],T=["value"],W=["value"],$=["value"],J=M({__name:"Edit",setup(G){const n=q(),C=n.props.docentes??[],S=n.props.sedesCatalog??[],f=n.props.areas??[],y=n.props.modalidadesCatalog??[],U=n.props.periodosCatalog??[],r=E({id:n.props.curso.id,nombre:n.props.curso.nombre??"",codigo:n.props.curso.codigo??"",descripcion:n.props.curso.descripcion??"",creditos:n.props.curso.creditos??"",nivel:n.props.curso.nivel??"pregrado",modalidad:n.props.curso.modalidad??"",modalidad_id:n.props.curso.modalidad_id??"",area_id:n.props.curso.area_id??"",docente_id:n.props.curso.docente_id??"",sede_id:n.props.curso.sede_id??"",drive_url:n.props.curso.drive_url??"",periodo_academico:n.props.curso.periodo_academico??""}),V=v(()=>(f??[]).find(s=>String(s.id)===String(r.value.area_id))??null),w=v(()=>{var e;const s=((e=V.value)==null?void 0:e.modalidades)??[];return s.length?s:(y??[]).filter(o=>String(o.area_id??"")===String(r.value.area_id))});x(()=>r.value.area_id,()=>{r.value.modalidad_id="",r.value.modalidad=""}),x(()=>r.value.modalidad_id,s=>{const o=(f??[]).flatMap(m=>m.modalidades??[]).find(m=>String(m.id)===String(s));r.value.modalidad=(o==null?void 0:o.nombre)??""});function B(){const{id:s,...e}=r.value,o={...e};k.put(`/cursos/${s}`,o,{onSuccess:()=>{_.fire({icon:"success",title:"Curso actualizado",text:"El curso se actualizo correctamente.",confirmButtonText:"OK",confirmButtonColor:"#6d28d9"}).then(()=>{k.reload()})},onError:()=>{_.fire({icon:"error",title:"Error al actualizar curso",text:"Revisa los campos e intentalo nuevamente.",confirmButtonColor:"#6d28d9"})}})}return(s,e)=>(i(),z(A,null,{default:D(()=>[d("div",N,[e[18]||(e[18]=d("h1",{class:"text-3xl font-bold mb-8 text-center"},"Editar Curso",-1)),d("form",{onSubmit:P(B,["prevent"]),class:"bg-card text-foreground p-6 rounded-xl shadow-sm border border-border mb-6 flex flex-col gap-2 max-w-md mx-auto"},[a(d("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.value.nombre=o),placeholder:"Nombre del curso",class:"border border-border bg-background text-foreground p-2 rounded focus:outline-none focus:ring-2 focus:ring-ring",required:""},null,512),[[p,r.value.nombre]]),a(d("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.value.codigo=o),placeholder:"NRC",class:"border border-border bg-background text-foreground p-2 rounded focus:outline-none focus:ring-2 focus:ring-ring",required:""},null,512),[[p,r.value.codigo]]),a(d("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.value.descripcion=o),placeholder:"Descripcion",class:"border border-border bg-background text-foreground p-2 rounded focus:outline-none focus:ring-2 focus:ring-ring"},null,512),[[p,r.value.descripcion]]),a(d("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.value.creditos=o),type:"number",placeholder:"Creditos",class:"border border-border bg-background text-foreground p-2 rounded focus:outline-none focus:ring-2 focus:ring-ring",required:""},null,512),[[p,r.value.creditos]]),a(d("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.value.nivel=o),class:"border border-border bg-background text-foreground p-2 rounded focus:outline-none focus:ring-2 focus:ring-ring",required:""},e[11]||(e[11]=[d("option",{value:"pregrado"},"Pregrado",-1),d("option",{value:"postgrado"},"Postgrado",-1)]),512),[[t,r.value.nivel]]),a(d("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>r.value.area_id=o),class:"border border-border bg-background text-foreground p-2 rounded focus:outline-none focus:ring-2 focus:ring-ring"},[e[12]||(e[12]=d("option",{value:""},"Area (seleccionar)",-1)),(i(!0),u(c,null,g(b(f),o=>(i(),u("option",{key:o.id,value:o.id},l(o.nombre),9,R))),128))],512),[[t,r.value.area_id]]),a(d("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>r.value.modalidad_id=o),class:"border border-border bg-background text-foreground p-2 rounded focus:outline-none focus:ring-2 focus:ring-ring",disabled:!r.value.area_id},[e[13]||(e[13]=d("option",{value:""},"Modalidad (seleccionar)",-1)),(i(!0),u(c,null,g(w.value,o=>(i(),u("option",{key:o.id,value:o.id},l(o.nombre),9,L))),128))],8,F),[[t,r.value.modalidad_id]]),a(d("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>r.value.docente_id=o),class:"border border-border bg-background text-foreground p-2 rounded focus:outline-none focus:ring-2 focus:ring-ring",required:""},[e[14]||(e[14]=d("option",{value:""},"Docente responsable",-1)),(i(!0),u(c,null,g(b(C),o=>(i(),u("option",{key:o.id,value:o.id},l(o.nombre)+" "+l(o.apellido),9,T))),128))],512),[[t,r.value.docente_id]]),a(d("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>r.value.sede_id=o),class:"border border-border bg-background text-foreground p-2 rounded focus:outline-none focus:ring-2 focus:ring-ring"},[e[15]||(e[15]=d("option",{value:""},"Sede",-1)),(i(!0),u(c,null,g(b(S),o=>(i(),u("option",{key:o.id,value:o.id},l(o.nombre),9,W))),128))],512),[[t,r.value.sede_id]]),a(d("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>r.value.drive_url=o),placeholder:"URL de Google Drive",class:"border border-border bg-background text-foreground p-2 rounded focus:outline-none focus:ring-2 focus:ring-ring"},null,512),[[p,r.value.drive_url]]),a(d("select",{"onUpdate:modelValue":e[10]||(e[10]=o=>r.value.periodo_academico=o),class:"border border-border bg-background text-foreground p-2 rounded focus:outline-none focus:ring-2 focus:ring-ring"},[e[16]||(e[16]=d("option",{value:""},"Periodo academico",-1)),(i(!0),u(c,null,g(b(U),o=>(i(),u("option",{key:o.id,value:o.codigo},l(o.codigo),9,$))),128))],512),[[t,r.value.periodo_academico]]),e[17]||(e[17]=d("button",{type:"submit",class:"bg-primary text-primary-foreground px-4 py-2 rounded hover:opacity-90 transition"}," Actualizar ",-1))],32)])]),_:1}))}});export{J as default};

import{d as ge,n as fe,r as f,c as M,a as xe,o as r,w as _e,b as o,e as n,f as x,t as d,u as _,y as he,F as V,i as C,j as E,k as N,g as a,h as l,p as ye,v as Y,W as v}from"./app-0xfeTETD.js";import{_ as ke}from"./AppLayout.vue_vue_type_script_setup_true_lang-Czkn1H1y.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BRkfCIi1.js";import"./index-1Zo7FGYr.js";const we={class:"p-6 min-h-screen bg-background text-foreground"},Ve={class:"mb-4"},Ce={class:"text-2xl font-bold"},Ue={class:"text-sm text-muted-foreground"},Se={class:"mb-4"},je={class:"text-sm mb-1"},Ae={class:"h-2 rounded bg-muted"},Ne={class:"flex gap-2 mb-3"},$e=["onClick"],Ee={key:0,class:"ml-1 text-xs text-muted-foreground"},Te={class:"rounded-xl border p-4 bg-card"},Fe={key:0,class:"space-y-4"},De={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Re={class:"grid grid-cols-2 gap-3"},Me={class:"space-y-2"},Oe=["onUpdate:modelValue"],Pe=["onUpdate:modelValue"],He={class:"flex items-center gap-2 text-sm"},Be=["onUpdate:modelValue"],Ie=["onClick"],Ze={class:"space-y-2"},Le=["onUpdate:modelValue"],Je=["onUpdate:modelValue"],ze=["onUpdate:modelValue"],qe=["onUpdate:modelValue"],Ge=["onClick"],Qe={class:"mt-6"},We={class:"space-y-2"},Ke={class:"text-sm font-medium"},Xe={class:"text-xs text-muted-foreground"},Ye={class:"flex items-center gap-2"},eo=["onClick"],oo={key:1},so={class:"mb-3 flex items-center gap-2"},to=["onClick"],ao={class:"mb-3 flex items-center gap-2"},ro=["required","placeholder"],no=["disabled"],lo={key:0,class:"text-xs text-muted-foreground mb-2"},io={class:"font-medium"},uo={class:"space-y-2"},po={class:"text-sm font-medium"},co={class:"text-xs text-muted-foreground"},mo={key:0,class:"ml-2"},bo={key:1,class:"ml-2"},vo={key:0,class:"text-xs mt-1"},go={class:"flex items-center gap-3"},fo={key:0,class:"flex items-center gap-2"},xo=["onClick"],_o=["onClick"],ho=["onClick"],yo=["href"],ko=["onClick"],wo=["onClick"],Vo={key:2,class:"space-y-4"},Co={class:"grid grid-cols-1 md:grid-cols-4 gap-3"},Uo=["value"],So={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},jo={class:"rounded border p-3"},Ao={class:"grid grid-cols-3 gap-2"},No={class:"rounded border p-3"},$o={class:"grid grid-cols-3 gap-2"},Eo={key:0,class:"rounded border p-3"},To={class:"font-medium"},Fo={key:3,class:"space-y-4"},Do={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},Ro={class:"rounded border p-3"},Mo={class:"rounded border p-3"},Oo={class:"flex justify-between items-center"},Po=["href"],Jo=ge({__name:"Show",setup(Ho){var q,G,Q,W,K,X;const h=fe(),u=h.props.curso;h.props.requerimientos;const O=h.props.avance,P=h.props.sedesCatalog??[],H=h.props.currentUserRole??((G=(q=h.props.auth)==null?void 0:q.user)==null?void 0:G.role)??null,B=h.props.currentUserId??((W=(Q=h.props.auth)==null?void 0:Q.user)==null?void 0:W.id)??null,U=f("acta"),y=f("guia"),A=f(""),k=f(null),$=f(!1),T=f(!1),I=f(""),Z=f("success"),F=M(()=>U.value==="recursos"&&(y.value==="guia"||y.value==="presentacion")),S=f(""),L=M(()=>H==="admin"?!0:H!=="responsable"||!B?!1:Number(u.user_id)===Number(B));function J(t){return(t||"").normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}const z=M(()=>{if(!k.value&&!S.value)return"";const t=k.value?(k.value.name.split(".").pop()||"").toLowerCase():"",e=S.value?J(S.value):k.value?J(k.value.name.replace(/\.[^.]+$/,"")):"";return e?e+(t?"."+t:""):""});function m(t,e="success"){I.value=t,Z.value=e,T.value=!0,setTimeout(()=>{T.value=!1},2500)}function ee(t){const e=t.target;k.value=e.files&&e.files[0]?e.files[0]:null}function oe(){if(!k.value){m("Seleccione un archivo","error");return}if(F.value&&!A.value){m("Ingrese la semana","error");return}const t=new FormData,e=y.value;t.append("tipo",e),t.append("archivo",k.value),A.value&&t.append("semana",String(A.value)),S.value&&t.append("nombre",S.value),e==="trabajo"&&t.append("nivel",R.value||""),$.value=!0,v.post(`/cursos/${u.id}/evidencias`,t,{forceFormData:!0,onSuccess:()=>{m("Evidencia subida"),v.reload()},onError:()=>{m("No se pudo subir la evidencia","error")},onFinish:()=>{$.value=!1}})}const j=t=>(u.evidencias??[]).filter(e=>e.tipo===t),se=t=>t==="acta"?(u.actas??[]).length||0:t==="recursos"?j("guia").length+j("presentacion").length+j("trabajo").length:t==="registro"?(u.registroNotas??[]).length||0:t==="final"&&u.informeFinal?1:0,te=new Date,ae=t=>t.toISOString().slice(0,10),c=f({numero:String(((u.actas??[]).length||0)+1).padStart(2,"0"),fecha:ae(te),hora_inicio:"",hora_fin:"",modalidad:u.modalidad??"",responsable:((K=u.responsable)==null?void 0:K.name)??"",asistentes:Array.from({length:5}).map(()=>({nombre:"",campus:"",asistio:!1})),acuerdos:Array.from({length:3}).map(()=>({tema:"",acuerdo:"",responsable:"",fecha_entrega:""}))});function re(){c.value.asistentes.push({nombre:"",campus:"",asistio:!1})}function ne(t){c.value.asistentes.splice(t,1)}function le(){c.value.acuerdos.push({tema:"",acuerdo:"",responsable:"",fecha_entrega:""})}function de(t){c.value.acuerdos.splice(t,1)}function ie(){const t=JSON.parse(JSON.stringify(c.value));if(t.asistentes=(t.asistentes||[]).filter(e=>(e.nombre||"").trim()!==""||(e.campus||"").trim()!==""||!!e.asistio),t.acuerdos=(t.acuerdos||[]).filter(e=>e.tema||e.acuerdo||e.responsable||e.fecha_entrega),!t.fecha){m("Ingrese la fecha","error");return}v.post(`/cursos/${u.id}/actas`,t,{onSuccess:()=>{m("Acta registrada"),v.reload()},onError:()=>{m("No se pudo registrar el acta","error")}})}function ue(t){confirm("¿Eliminar esta acta?")&&v.delete(`/actas/${t.id}`,{onSuccess:()=>{m("Acta eliminada"),v.reload()}})}function pe(t){confirm("¿Eliminar este archivo?")&&v.delete(`/evidencias/${t.id}`,{onSuccess:()=>{m("Evidencia eliminada"),v.reload()}})}function ce(t){const e=t.archivo_path.split("/").pop(),w=prompt("Nuevo nombre de archivo",e);!w||w===e||v.patch(`/evidencias/${t.id}`,{nombre:w},{onSuccess:()=>{m("Evidencia renombrada"),v.reload()}})}function D(t,e){v.patch(`/evidencias/${t.id}/review`,{estado:e},{preserveScroll:!0,onSuccess:()=>{m("Estado actualizado"),v.reload()},onError:()=>{m("No se pudo actualizar el estado","error")}})}function me(t){return t==="validado"?"Validado":t==="observado"?"Observado":"Pendiente"}const R=f(""),i=f({campus:"",sede_id:"",nrc:"",docente_nombre:"",total_estudiantes:0,c1_aprobados:0,c1_desaprobados:0,c1_promedio:0,ep_aprobados:0,ep_desaprobados:0,ep_promedio:0,hipotesis_c1:"",hipotesis_ep:""});function be(){const t={...i.value};if(t.sede_id){const e=P.find(w=>String(w.id)===String(t.sede_id));e&&(t.campus=e.nombre)}t.sede_id||delete t.sede_id,v.post(`/cursos/${u.id}/registro-notas`,t,{onSuccess:()=>{m("Registro guardado"),v.reload()},onError:()=>{m("No se pudo guardar","error")}})}const p=f({responsable:((X=u.responsable)==null?void 0:X.name)??"",fecha_presentacion:"",resultados:{},mejoras:{},resultadosTexto:"",mejorasTexto:""});if(u.informeFinal){p.value.responsable=u.informeFinal.responsable||p.value.responsable,p.value.fecha_presentacion=(u.informeFinal.fecha_presentacion||"").slice(0,10),p.value.resultados=u.informeFinal.resultados||{},p.value.mejoras=u.informeFinal.mejoras||{};try{p.value.resultadosTexto=JSON.stringify(p.value.resultados,null,2)}catch{}try{p.value.mejorasTexto=JSON.stringify(p.value.mejoras,null,2)}catch{}}function ve(){try{p.value.resultados=p.value.resultadosTexto?JSON.parse(p.value.resultadosTexto):{},p.value.mejoras=p.value.mejorasTexto?JSON.parse(p.value.mejorasTexto):{}}catch{}v.post(`/cursos/${u.id}/informe-final`,p.value,{onSuccess:()=>{m("Informe final guardado"),v.reload()},onError:()=>{m("No se pudo guardar el informe","error")}})}return(t,e)=>(r(),xe(ke,null,{default:_e(()=>{var w;return[o("div",we,[o("div",Ve,[o("h1",Ce,d(_(u).codigo)+" - "+d(_(u).nombre),1),o("div",Ue,"Docente: "+d(((w=_(u).docente)==null?void 0:w.nombre)??"Sin asignar"),1)]),o("div",Se,[o("div",je,"Avance: "+d(_(O))+"%",1),o("div",Ae,[o("div",{class:"h-2 rounded bg-green-600",style:he({width:`${_(O)}%`})},null,4)])]),o("div",Ne,[(r(),n(V,null,C(["acta","recursos","registro","final"],s=>o("button",{key:s,onClick:b=>U.value=s,class:E(["rounded px-3 py-1 border",{"bg-primary text-primary-foreground":U.value===s}])},[N(d(s.charAt(0).toUpperCase()+s.slice(1))+" ",1),s!=="final"?(r(),n("span",Ee,"("+d(se(s))+")",1)):x("",!0)],10,$e)),64))]),o("div",Te,[U.value==="acta"?(r(),n("div",Fe,[o("div",De,[o("div",null,[e[26]||(e[26]=o("label",{class:"text-xs text-muted-foreground"},"N° Acta",-1)),a(o("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>c.value.numero=s),class:"w-full rounded border bg-background p-2"},null,512),[[l,c.value.numero]])]),o("div",null,[e[27]||(e[27]=o("label",{class:"text-xs text-muted-foreground"},"Fecha",-1)),a(o("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>c.value.fecha=s),type:"date",class:"w-full rounded border bg-background p-2"},null,512),[[l,c.value.fecha]])]),o("div",null,[e[28]||(e[28]=o("label",{class:"text-xs text-muted-foreground"},"Responsable de asignatura",-1)),a(o("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>c.value.responsable=s),class:"w-full rounded border bg-background p-2"},null,512),[[l,c.value.responsable]])]),o("div",Re,[o("div",null,[e[29]||(e[29]=o("label",{class:"text-xs text-muted-foreground"},"Hora inicio",-1)),a(o("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>c.value.hora_inicio=s),type:"time",class:"w-full rounded border bg-background p-2"},null,512),[[l,c.value.hora_inicio]])]),o("div",null,[e[30]||(e[30]=o("label",{class:"text-xs text-muted-foreground"},"Hora fin",-1)),a(o("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>c.value.hora_fin=s),type:"time",class:"w-full rounded border bg-background p-2"},null,512),[[l,c.value.hora_fin]])])]),o("div",null,[e[31]||(e[31]=o("label",{class:"text-xs text-muted-foreground"},"Modalidad",-1)),a(o("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>c.value.modalidad=s),class:"w-full rounded border bg-background p-2"},null,512),[[l,c.value.modalidad]])])]),o("div",null,[e[33]||(e[33]=o("div",{class:"font-medium mb-2"},"Relación de docentes",-1)),o("div",Me,[(r(!0),n(V,null,C(c.value.asistentes,(s,b)=>(r(),n("div",{key:b,class:"grid grid-cols-1 md:grid-cols-4 gap-2 items-center"},[a(o("input",{"onUpdate:modelValue":g=>s.nombre=g,placeholder:"Apellidos y nombres",class:"rounded border bg-background p-2 md:col-span-2"},null,8,Oe),[[l,s.nombre]]),a(o("input",{"onUpdate:modelValue":g=>s.campus=g,placeholder:"Sede",class:"rounded border bg-background p-2"},null,8,Pe),[[l,s.campus]]),o("label",He,[a(o("input",{type:"checkbox","onUpdate:modelValue":g=>s.asistio=g},null,8,Be),[[ye,s.asistio]]),e[32]||(e[32]=N(" Asistió "))]),c.value.asistentes.length>1?(r(),n("button",{key:0,type:"button",class:"text-red-600 text-sm",onClick:g=>ne(b)},"Quitar",8,Ie)):x("",!0)]))),128)),o("button",{type:"button",class:"px-2 py-1 border rounded text-sm",onClick:re},"Agregar docente")])]),o("div",null,[e[34]||(e[34]=o("div",{class:"font-medium mb-2"},"Temas y acuerdos",-1)),o("div",Ze,[(r(!0),n(V,null,C(c.value.acuerdos,(s,b)=>(r(),n("div",{key:b,class:"grid grid-cols-1 md:grid-cols-4 gap-2 items-center"},[a(o("input",{"onUpdate:modelValue":g=>s.tema=g,placeholder:"Temas tratados",class:"rounded border bg-background p-2"},null,8,Le),[[l,s.tema]]),a(o("input",{"onUpdate:modelValue":g=>s.acuerdo=g,placeholder:"Acuerdos",class:"rounded border bg-background p-2 md:col-span-2"},null,8,Je),[[l,s.acuerdo]]),a(o("input",{"onUpdate:modelValue":g=>s.responsable=g,placeholder:"Responsables",class:"rounded border bg-background p-2"},null,8,ze),[[l,s.responsable]]),a(o("input",{"onUpdate:modelValue":g=>s.fecha_entrega=g,type:"date",placeholder:"Fecha de entrega",class:"rounded border bg-background p-2"},null,8,qe),[[l,s.fecha_entrega]]),c.value.acuerdos.length>1?(r(),n("button",{key:0,type:"button",class:"text-red-600 text-sm",onClick:g=>de(b)},"Quitar",8,Ge)):x("",!0)]))),128)),o("button",{type:"button",class:"px-2 py-1 border rounded text-sm",onClick:le},"Agregar tema")])]),o("div",{class:"flex justify-end"},[o("button",{onClick:ie,class:"px-3 py-1 rounded bg-primary text-primary-foreground"},"Guardar acta")]),o("div",Qe,[e[36]||(e[36]=o("div",{class:"font-medium mb-2"},"Actas registradas",-1)),o("div",We,[(r(!0),n(V,null,C(_(u).actas??[],s=>(r(),n("div",{key:s.id,class:"flex items-center justify-between rounded border p-2"},[o("div",null,[o("div",Ke,"Acta N° "+d(s.numero||"—")+" — "+d(new Date(s.fecha).toLocaleDateString()),1),o("div",Xe,"Resp.: "+d(s.responsable||"—")+" — Modalidad: "+d(s.modalidad||"—"),1)]),o("div",Ye,[o("button",{class:"p-1",title:"Eliminar",onClick:b=>ue(s)},e[35]||(e[35]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-5 h-5 text-red-600"},[o("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12ZM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4Z"})],-1)]),8,eo)])]))),128))])])])):U.value==="recursos"?(r(),n("div",oo,[o("div",so,[(r(),n(V,null,C(["guia","presentacion","trabajo"],s=>o("button",{key:s,onClick:b=>y.value=s,class:E(["px-3 py-1 rounded border",{"bg-muted":y.value===s}])},d(s==="guia"?"Guías de laboratorio":s==="presentacion"?"Presentaciones":"Trabajos finales"),11,to)),64))]),o("div",ao,[a(o("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>A.value=s),required:F.value,type:"number",min:"1",class:"w-24 rounded border bg-background p-1",placeholder:F.value?"Semana*":"Semana"},null,8,ro),[[l,A.value]]),o("input",{type:"file",onChange:ee,class:"rounded border bg-background p-1"},null,32),a(o("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>S.value=s),class:"rounded border bg-background p-1",placeholder:"Nombre (opcional)"},null,512),[[l,S.value]]),y.value==="trabajo"?a((r(),n("select",{key:0,"onUpdate:modelValue":e[8]||(e[8]=s=>R.value=s),class:"rounded border bg-background p-1"},e[37]||(e[37]=[o("option",{value:""},"Nivel",-1),o("option",{value:"alto"},"Alto",-1),o("option",{value:"medio"},"Medio",-1),o("option",{value:"bajo"},"Bajo",-1)]),512)),[[Y,R.value]]):x("",!0),o("button",{onClick:oe,disabled:$.value,class:"px-3 py-1 rounded bg-primary text-primary-foreground"},d($.value?"Enviando…":"Enviar"),9,no)]),z.value?(r(),n("div",lo,[e[38]||(e[38]=N("Se guardará como: ")),o("span",io,d(z.value),1)])):x("",!0),o("div",uo,[(r(!0),n(V,null,C(y.value==="guia"?j("guia"):y.value==="presentacion"?j("presentacion"):j("trabajo"),s=>(r(),n("div",{key:s.id,class:"flex items-center justify-between rounded border p-2"},[o("div",null,[o("div",po,d(s.archivo_path.split("/").pop()),1),o("div",co,[N(" Subido: "+d(new Date(s.fecha_subida??s.created_at).toLocaleString())+" ",1),s.nivel?(r(),n("span",mo,"Nivel: "+d(s.nivel),1)):x("",!0),s.semana?(r(),n("span",bo,"Semana "+d(s.semana),1)):x("",!0)]),L.value?(r(),n("div",vo,[e[39]||(e[39]=N(" Estado: ")),o("span",{class:E(s.estado==="validado"?"text-emerald-600":s.estado==="observado"?"text-amber-600":"text-muted-foreground")},d(me(s.estado)),3)])):x("",!0)]),o("div",go,[L.value?(r(),n("div",fo,[o("button",{type:"button",class:"px-2 py-1 text-xs rounded border border-emerald-600 text-emerald-700 hover:bg-emerald-50",onClick:b=>D(s,"validado")}," Validar ",8,xo),o("button",{type:"button",class:"px-2 py-1 text-xs rounded border border-amber-500 text-amber-700 hover:bg-amber-50",onClick:b=>D(s,"observado")}," Observar ",8,_o),o("button",{type:"button",class:"px-2 py-1 text-xs rounded border border-muted text-muted-foreground hover:bg-muted/40",onClick:b=>D(s,"pendiente")}," Pendiente ",8,ho)])):x("",!0),o("a",{class:"p-1",title:"Ver",href:`/storage/${s.archivo_path}`,target:"_blank"},e[40]||(e[40]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-5 h-5 text-primary"},[o("path",{d:"M12 5C5 5 2 12 2 12s3 7 10 7 10-7 10-7-3-7-10-7Zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10Z"})],-1)]),8,yo),o("button",{class:"p-1",title:"Renombrar",onClick:b=>ce(s)},e[41]||(e[41]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-5 h-5 text-yellow-600"},[o("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25Zm3.92 2.33H5v-1.92l8.06-8.06 1.92 1.92-8.06 8.06ZM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83Z"})],-1)]),8,ko),o("button",{class:"p-1",title:"Eliminar",onClick:b=>pe(s)},e[42]||(e[42]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-5 h-5 text-red-600"},[o("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12ZM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4Z"})],-1)]),8,wo)])]))),128))])])):U.value==="registro"?(r(),n("div",Vo,[o("div",Co,[a(o("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>i.value.sede_id=s),class:"rounded border bg-background p-2"},[e[43]||(e[43]=o("option",{value:""},"Sede (catálogo)",-1)),(r(!0),n(V,null,C(_(P),s=>(r(),n("option",{key:s.id,value:s.id},d(s.nombre),9,Uo))),128))],512),[[Y,i.value.sede_id]]),a(o("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>i.value.campus=s),placeholder:"Sede (texto)",class:"rounded border bg-background p-2"},null,512),[[l,i.value.campus]]),a(o("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>i.value.nrc=s),placeholder:"NRC",class:"rounded border bg-background p-2"},null,512),[[l,i.value.nrc]]),a(o("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>i.value.docente_nombre=s),placeholder:"Docente",class:"rounded border bg-background p-2"},null,512),[[l,i.value.docente_nombre]]),a(o("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>i.value.total_estudiantes=s),type:"number",min:"0",placeholder:"Total estudiantes",class:"rounded border bg-background p-2"},null,512),[[l,i.value.total_estudiantes,void 0,{number:!0}]])]),o("div",So,[o("div",jo,[e[44]||(e[44]=o("div",{class:"font-medium mb-2"},"Consolidado 1 (C1)",-1)),o("div",Ao,[a(o("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>i.value.c1_aprobados=s),type:"number",min:"0",placeholder:"Aprobados",class:"rounded border bg-background p-2"},null,512),[[l,i.value.c1_aprobados,void 0,{number:!0}]]),a(o("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>i.value.c1_desaprobados=s),type:"number",min:"0",placeholder:"Desaprobados",class:"rounded border bg-background p-2"},null,512),[[l,i.value.c1_desaprobados,void 0,{number:!0}]]),a(o("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>i.value.c1_promedio=s),type:"number",step:"0.01",min:"0",placeholder:"Promedio",class:"rounded border bg-background p-2"},null,512),[[l,i.value.c1_promedio,void 0,{number:!0}]])]),a(o("textarea",{"onUpdate:modelValue":e[17]||(e[17]=s=>i.value.hipotesis_c1=s),class:"w-full rounded border bg-background p-2 mt-2",placeholder:"Hipótesis para C1"},null,512),[[l,i.value.hipotesis_c1]])]),o("div",No,[e[45]||(e[45]=o("div",{class:"font-medium mb-2"},"Examen Parcial (EP)",-1)),o("div",$o,[a(o("input",{"onUpdate:modelValue":e[18]||(e[18]=s=>i.value.ep_aprobados=s),type:"number",min:"0",placeholder:"Aprobados",class:"rounded border bg-background p-2"},null,512),[[l,i.value.ep_aprobados,void 0,{number:!0}]]),a(o("input",{"onUpdate:modelValue":e[19]||(e[19]=s=>i.value.ep_desaprobados=s),type:"number",min:"0",placeholder:"Desaprobados",class:"rounded border bg-background p-2"},null,512),[[l,i.value.ep_desaprobados,void 0,{number:!0}]]),a(o("input",{"onUpdate:modelValue":e[20]||(e[20]=s=>i.value.ep_promedio=s),type:"number",step:"0.01",min:"0",placeholder:"Promedio",class:"rounded border bg-background p-2"},null,512),[[l,i.value.ep_promedio,void 0,{number:!0}]])]),a(o("textarea",{"onUpdate:modelValue":e[21]||(e[21]=s=>i.value.hipotesis_ep=s),class:"w-full rounded border bg-background p-2 mt-2",placeholder:"Hipótesis para EP"},null,512),[[l,i.value.hipotesis_ep]])])]),o("div",{class:"flex justify-end"},[o("button",{onClick:be,class:"px-3 py-1 rounded bg-primary text-primary-foreground"},"Guardar registro")]),Object.keys(t.$page.props.registroAggregate||{}).length?(r(),n("div",Eo,[e[46]||(e[46]=o("div",{class:"font-medium mb-2"},"Resultado final (consolidado)",-1)),(r(!0),n(V,null,C(t.$page.props.registroAggregate,(s,b)=>(r(),n("div",{key:b,class:"grid grid-cols-5 gap-2 text-sm items-center border-b py-1"},[o("div",To,d(b),1),o("div",null,"Total: "+d(s.total_estudiantes),1),o("div",null,"C1: "+d(s.c1_aprobados)+" ("+d(s.c1_porcentaje)+"%)",1),o("div",null,"EP: "+d(s.ep_aprobados)+" ("+d(s.ep_porcentaje)+"%)",1),o("div",null,"Promedios C1/EP: "+d(s.c1_promedio)+" / "+d(s.ep_promedio),1)]))),128))])):x("",!0)])):U.value==="final"?(r(),n("div",Fo,[o("div",Do,[a(o("input",{"onUpdate:modelValue":e[22]||(e[22]=s=>p.value.responsable=s),class:"rounded border bg-background p-2",placeholder:"Responsable de asignatura"},null,512),[[l,p.value.responsable]]),a(o("input",{"onUpdate:modelValue":e[23]||(e[23]=s=>p.value.fecha_presentacion=s),type:"date",class:"rounded border bg-background p-2",placeholder:"Fecha de presentación"},null,512),[[l,p.value.fecha_presentacion]])]),o("div",Ro,[e[47]||(e[47]=o("div",{class:"font-medium mb-2"},"Resultados por sede (simplificado)",-1)),e[48]||(e[48]=o("div",{class:"text-xs text-muted-foreground mb-1"},"Opcional: pega JSON de resultados por sede.",-1)),a(o("textarea",{"onUpdate:modelValue":e[24]||(e[24]=s=>p.value.resultadosTexto=s),class:"w-full h-24 rounded border bg-background p-2",placeholder:'{"Huancayo": {"promedio_c1": 0, "ep_promedio": 0}}'},null,512),[[l,p.value.resultadosTexto]])]),o("div",Mo,[e[49]||(e[49]=o("div",{class:"font-medium mb-2"},"Oportunidades de mejora",-1)),a(o("textarea",{"onUpdate:modelValue":e[25]||(e[25]=s=>p.value.mejorasTexto=s),class:"w-full h-24 rounded border bg-background p-2",placeholder:'{"Huancayo": {"evaluaciones": "..."}}'},null,512),[[l,p.value.mejorasTexto]])]),o("div",Oo,[_(u).informeFinal?(r(),n("a",{key:0,href:`/cursos/${_(u).id}/informe-final/preview`,target:"_blank",class:"px-3 py-1 rounded border"},"Imprimir / PDF",8,Po)):x("",!0),o("button",{onClick:ve,class:"px-3 py-1 rounded bg-primary text-primary-foreground"},"Guardar informe final")])])):x("",!0)]),T.value?(r(),n("div",{key:0,class:E(["fixed bottom-4 right-4 px-4 py-2 rounded shadow text-sm",Z.value==="success"?"bg-green-600 text-white":"bg-red-600 text-white"])},d(I.value),3)):x("",!0)])]}),_:1}))}});export{Jo as default};

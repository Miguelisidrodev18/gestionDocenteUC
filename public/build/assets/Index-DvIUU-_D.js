import{d as F,n as z,c as b,r as W,a as J,o as s,w as K,b as e,e as r,f as l,F as u,i as p,t as i,j as X,l as f,k as x,W as w}from"./app-0xfeTETD.js";import{_ as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-Czkn1H1y.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BRkfCIi1.js";import"./index-1Zo7FGYr.js";const ee={class:"p-8 min-h-screen bg-background text-foreground"},te={class:"flex items-center justify-between mb-6"},oe={key:0,class:"mb-4 text-xs text-muted-foreground"},se={key:1,class:"mb-4 rounded border border-red-200 bg-red-50 px-3 py-2 text-xs text-red-700"},re={class:"mb-4 flex flex-wrap gap-2"},de=["onClick"],le={key:2,class:"bg-card/90 backdrop-blur rounded-2xl border border-white/10 shadow-md shadow-[#190019]/20 p-4"},ae={class:"min-w-full text-xs mb-4"},ie={class:"text-muted-foreground"},ne={key:0,class:"text-right py-1 pr-2"},ue={class:"py-1 pr-2"},pe={class:"py-1 pr-2"},ce={key:0,class:"py-1 pr-2 text-right"},me=["onClick"],be={key:3,class:"bg-card/90 backdrop-blur rounded-2xl border border-white/10 shadow-md shadow-[#190019]/20 p-4"},xe={class:"flex items-center justify-between mb-3"},ve={class:"min-w-full text-xs mb-4"},ye={class:"text-muted-foreground"},ge={key:0,class:"text-left py-1 pr-2"},fe={key:1,class:"text-right py-1 pr-2"},he={class:"py-1 pr-2"},_e={class:"py-1 pr-2"},ke={class:"py-1 pr-2"},we={class:"py-1 pr-2"},Ce={key:0,class:"py-1 pr-2"},qe={key:1,class:"py-1 pr-2 text-right"},Ee=["onClick"],Ae={name:"area_id",class:"border border-border rounded px-2 py-1"},Se=["value"],Be={name:"bloque_id",class:"border border-border rounded px-2 py-1"},Me=["value","data-nombre"],Ne={key:0,class:"sm:col-span-4 text-[11px] text-amber-600"},Oe={class:"sm:col-span-4 flex justify-end mt-2"},Ve=["disabled"],Re={key:4,class:"bg-card/90 backdrop-blur rounded-2xl border border-white/10 shadow-md shadow-[#190019]/20 p-4"},Ze={class:"min-w-full text-xs mb-4"},He={class:"text-muted-foreground"},je={key:0,class:"text-right py-1 pr-2"},Pe={class:"py-1 pr-2"},Le={class:"py-1 pr-2"},Te={class:"py-1 pr-2"},Ie={key:0,class:"py-1 pr-2 text-right"},$e=["onClick"],De={key:5,class:"bg-card/90 backdrop-blur rounded-2xl border border-white/10 shadow-md shadow-[#190019]/20 p-4"},Ge={class:"min-w-full text-xs mb-4"},Qe={class:"text-muted-foreground"},Ue={key:0,class:"text-right py-1 pr-2"},Fe={class:"py-1 pr-2"},ze={class:"py-1 pr-2"},We={key:0,class:"py-1 pr-2 text-right"},Je=["onClick"],Ke={key:6,class:"bg-card/90 backdrop-blur rounded-2xl border border-white/10 shadow-md shadow-[#190019]/20 p-4"},Xe={class:"min-w-full text-xs mb-4"},Ye={class:"text-muted-foreground"},et={key:0,class:"text-right py-1 pr-2"},tt={class:"py-1 pr-2"},ot={class:"py-1 pr-2"},st={class:"py-1 pr-2"},rt={class:"py-1 pr-2"},dt=["onSubmit"],lt=["value"],at=["value"],it={key:1},nt={key:0,class:"py-1 pr-2 text-right"},ut=["onClick"],pt={key:7,class:"bg-card/90 backdrop-blur rounded-2xl border border-white/10 shadow-md shadow-[#190019]/20 p-4"},ct={class:"min-w-full text-xs mb-4"},mt={class:"text-muted-foreground"},bt={key:0,class:"text-right py-1 pr-2"},xt={class:"py-1 pr-2"},vt={class:"py-1 pr-2"},yt={class:"py-1 pr-2"},gt={key:0,class:"py-1 pr-2 text-right"},ft=["onClick"],ht={key:8,class:"bg-card/90 backdrop-blur rounded-2xl border border-white/10 shadow-md shadow-[#190019]/20 p-4"},_t={class:"min-w-full text-xs mb-4"},kt={class:"text-muted-foreground"},wt={key:0,class:"text-right py-1 pr-2"},Ct={class:"py-1 pr-2"},qt={key:0,class:"py-1 pr-2 text-right"},Et=["onClick"],At=["onClick"],St={key:9,class:"bg-card/90 backdrop-blur rounded-2xl border border-white/10 shadow-md shadow-[#190019]/20 p-4"},Bt={class:"mb-3 text-xs text-muted-foreground"},Mt={class:"font-medium text-foreground"},Nt={key:0,class:"ml-2 text-amber-600"},Ot={key:0,class:"mb-3 text-xs"},Vt={class:"font-medium text-foreground"},Rt={key:0,class:"ml-1 text-amber-600"},Zt={key:1,class:"mb-4 text-xs text-muted-foreground"},Ht={class:"min-w-full text-xs mb-4"},jt={class:"text-muted-foreground"},Pt={key:0,class:"text-right py-1 pr-2"},Lt={class:"py-1 pr-2"},Tt={class:"py-1 pr-2"},It={class:"py-1 pr-2"},$t={class:"py-1 pr-2"},Dt={class:"py-1 pr-2"},Gt={key:0,class:"py-1 pr-2 text-right"},Qt=["onClick"],Ut={name:"modalidad_id",class:"border border-border rounded px-2 py-1"},Ft=["value"],zt={name:"tipo_evidencia_id",class:"border border-border rounded px-2 py-1"},Wt=["value"],oo=F({__name:"Index",setup(Jt){const v=z(),j=[{title:"Dashboard",href:"/dashboard"},{title:"Catalogos",href:"/catalogos"}],P=b(()=>v.props.sedes??[]),_=b(()=>v.props.areas??[]),C=b(()=>v.props.modalidades??[]),L=b(()=>v.props.periodos??[]),q=b(()=>v.props.tipos_evidencia??[]),E=b(()=>v.props.bloques??[]),k=b(()=>v.props.requisitos??[]),T=b(()=>v.props.especialidades??[]),n=b(()=>{var d,t;return((t=(d=v.props.auth)==null?void 0:d.user)==null?void 0:t.role)==="admin"}),I=b(()=>v.props.errors??{}),A=b(()=>Object.values(I.value).flat()),y=W("sedes"),S=b(()=>k.value.reduce((d,t)=>d+Number(t.peso||0),0)),B=b(()=>{const d={};return k.value.forEach(t=>{var a,m;const o=String(t.modalidad_id??((a=t.modalidad)==null?void 0:a.id)??"");o&&(d[o]||(d[o]={nombre:((m=t.modalidad)==null?void 0:m.nombre)??"Modalidad",total:0}),d[o].total+=Number(t.peso||0))}),Object.values(d)});function c(d,t,o={}){const a={preserveScroll:!0};t==="post"?w.post(d,o,a):t==="put"?w.put(d,o,a):w.delete(d,a)}function $(d){const t=window.prompt("Nuevo nombre de especialidad",(d==null?void 0:d.nombre)??"");t&&c(`/catalogos/especialidades/${d.id}`,"put",{nombre:t})}function D(d){window.confirm("Eliminar esta especialidad?")&&c(`/catalogos/especialidades/${d.id}`,"delete")}function h(d,t){window.confirm(`Eliminar ${t}?`)&&c(d,"delete")}function G(){window.confirm("Esta acción eliminará todos los catálogos. ¿Deseas continuar?")&&c("/catalogos/limpiar","post")}function Q(){window.confirm("Esta acción eliminará todas las modalidades. ¿Deseas continuar?")&&c("/catalogos/limpiar-modalidades","post")}function M(d){if(!d)return"-";const o=(d.includes("T")?d.slice(0,10):d).split("-");if(o.length!==3)return d;const[a,m,g]=o;return!a||!m||!g?d:`${g}/${m}/${a}`}function N(d){return d?d.includes("T")?d.slice(0,10):d:null}return(d,t)=>(s(),J(Y,{breadcrumbs:j},{default:K(()=>[e("div",ee,[e("div",te,[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold"},"Catálogos",-1)),n.value?(s(),r("button",{key:0,type:"button",class:"px-3 py-1 rounded border text-xs text-muted-foreground hover:text-foreground",onClick:G}," Limpiar catalogos ")):l("",!0)]),n.value?l("",!0):(s(),r("div",oe," Solo admin puede crear, editar o eliminar catalogos. ")),A.value.length?(s(),r("div",se,[t[9]||(t[9]=e("div",{class:"font-semibold mb-1"},"No se pudo guardar:",-1)),(s(!0),r(u,null,p(A.value,(o,a)=>(s(),r("div",{key:a},i(o),1))),128))])):l("",!0),e("div",re,[(s(),r(u,null,p([["sedes","Sedes"],["areas","Areas"],["bloques","Bloques"],["modalidades","Modalidades"],["periodos","Periodos"],["tipos","Tipos de evidencia"],["especialidades","Especialidades"],["requisitos","Requisitos"]],o=>e("button",{key:o[0],onClick:a=>y.value=o[0],class:X(["px-3 py-1 rounded-full text-xs font-medium shadow-sm ring-1 ring-inset transition-colors",y.value===o[0]?"bg-primary text-primary-foreground ring-primary/60":"bg-muted text-foreground ring-border/60 hover:bg-muted/80"])},i(o[1]),11,de)),64))]),y.value==="sedes"?(s(),r("div",le,[t[14]||(t[14]=e("h2",{class:"text-sm font-semibold mb-3"},"Sedes",-1)),e("table",ae,[e("thead",ie,[e("tr",null,[t[10]||(t[10]=e("th",{class:"text-left py-1 pr-2"},"Nombre",-1)),t[11]||(t[11]=e("th",{class:"text-left py-1 pr-2"},"Activo",-1)),n.value?(s(),r("th",ne,"Acciones")):l("",!0)])]),e("tbody",null,[(s(!0),r(u,null,p(P.value,o=>(s(),r("tr",{key:o.id,class:"border-t border-border/40"},[e("td",ue,i(o.nombre),1),e("td",pe,i(o.activo?"Si":"No"),1),n.value?(s(),r("td",ce,[e("button",{type:"button",class:"text-[11px] text-red-600 underline",onClick:a=>h(`/catalogos/sedes/${o.id}`,"esta sede"),title:"Eliminar"},t[12]||(t[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 text-red-600"},[e("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12ZM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4Z"})],-1)]),8,me)])):l("",!0)]))),128))])]),n.value?(s(),r("form",{key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs",onSubmit:t[0]||(t[0]=f(o=>c("/catalogos/sedes","post",{nombre:o.target.nombre.value,activo:o.target.activo.checked}),["prevent"]))},t[13]||(t[13]=[e("input",{name:"nombre",placeholder:"Nombre",class:"border border-border rounded px-2 py-1"},null,-1),e("label",{class:"inline-flex items-center gap-1 text-[11px]"},[e("input",{name:"activo",type:"checkbox",checked:"",class:"border-border"}),x(" Activo ")],-1),e("div",{class:"sm:col-span-2 flex justify-end mt-2"},[e("button",{type:"submit",class:"px-3 py-1 rounded bg-primary text-primary-foreground text-xs hover:opacity-90"}," Guardar sede ")],-1)]),32)):l("",!0)])):y.value==="modalidades"?(s(),r("div",be,[e("div",xe,[t[15]||(t[15]=e("h2",{class:"text-sm font-semibold"},"Modalidades",-1)),n.value?(s(),r("button",{key:0,type:"button",class:"px-2 py-1 rounded border text-[11px] text-muted-foreground hover:text-foreground",onClick:Q}," Limpiar modalidades ")):l("",!0)]),e("table",ve,[e("thead",ye,[e("tr",null,[t[16]||(t[16]=e("th",{class:"text-left py-1 pr-2"},"Nombre",-1)),t[17]||(t[17]=e("th",{class:"text-left py-1 pr-2"},"Semanas",-1)),t[18]||(t[18]=e("th",{class:"text-left py-1 pr-2"},"Area",-1)),t[19]||(t[19]=e("th",{class:"text-left py-1 pr-2"},"Bloque",-1)),n.value?(s(),r("th",ge,"Activo")):l("",!0),n.value?(s(),r("th",fe,"Acciones")):l("",!0)])]),e("tbody",null,[(s(!0),r(u,null,p(C.value,o=>{var a,m;return s(),r("tr",{key:o.id,class:"border-t border-border/40"},[e("td",he,i(o.nombre),1),e("td",_e,i(o.estructura_duracion==="BLOQUES"?o.semanas_por_bloque??o.duracion_semanas??16:o.duracion_semanas??16),1),e("td",ke,i(((a=o.area)==null?void 0:a.nombre)??"-"),1),e("td",we,i(((m=o.bloque)==null?void 0:m.nombre)??"-"),1),n.value?(s(),r("td",Ce,i(o.activo?"Si":"No"),1)):l("",!0),n.value?(s(),r("td",qe,[e("button",{type:"button",class:"text-[11px] text-red-600 underline",onClick:g=>h(`/catalogos/modalidades/${o.id}`,"esta modalidad"),title:"Eliminar"},t[20]||(t[20]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 text-red-600"},[e("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12ZM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4Z"})],-1)]),8,Ee)])):l("",!0)])}),128))])]),n.value?(s(),r("form",{key:0,class:"grid grid-cols-1 sm:grid-cols-4 gap-2 text-xs",onSubmit:t[1]||(t[1]=f(o=>{(()=>{var V,R,Z,H;const a=o.target,m=a.nombre_base.value,g=a.bloque_id,O=(((Z=(R=(V=g==null?void 0:g.selectedOptions)==null?void 0:V[0])==null?void 0:R.dataset)==null?void 0:Z.nombre)??"").replace(/^bloque\s+/i,"").trim(),U=O?`${m} bloque ${O}`:m;c("/catalogos/modalidades","post",{nombre:U,duracion_semanas:a.semanas.value,bloque_id:g.value||null,area_id:a.area_id.value||null,activo:(H=a.activo)==null?void 0:H.checked})})()},["prevent"]))},[t[23]||(t[23]=e("select",{name:"nombre_base",class:"border border-border rounded px-2 py-1"},[e("option",{value:"Presencial"},"Presencial"),e("option",{value:"Semipresencial"},"Semipresencial")],-1)),t[24]||(t[24]=e("input",{name:"semanas",type:"number",min:"1",max:"32",placeholder:"Semanas",class:"border border-border rounded px-2 py-1"},null,-1)),e("select",Ae,[t[21]||(t[21]=e("option",{value:""},"Area",-1)),(s(!0),r(u,null,p(_.value,o=>(s(),r("option",{key:o.id,value:o.id},i(o.nombre),9,Se))),128))]),e("select",Be,[t[22]||(t[22]=e("option",{value:""},"Bloque (opcional)",-1)),(s(!0),r(u,null,p(E.value,o=>(s(),r("option",{key:o.id,value:o.id,"data-nombre":o.nombre},i(o.nombre),9,Me))),128))]),t[25]||(t[25]=e("label",{class:"inline-flex items-center gap-1 text-[11px]"},[e("input",{name:"activo",type:"checkbox",checked:"",class:"border-border"}),x(" Activo ")],-1)),t[26]||(t[26]=e("div",{class:"sm:col-span-4 text-[11px] text-muted-foreground"}," Semanas: total si es Presencial. Si seleccionas bloque, se usa como semanas por bloque. ",-1)),_.value.length?l("",!0):(s(),r("div",Ne," Debes crear al menos un area antes de registrar modalidades. ")),e("div",Oe,[e("button",{type:"submit",class:"px-3 py-1 rounded bg-primary text-primary-foreground text-xs hover:opacity-90",disabled:!_.value.length}," Guardar modalidad ",8,Ve)])],32)):l("",!0)])):y.value==="bloques"?(s(),r("div",Re,[t[32]||(t[32]=e("h2",{class:"text-sm font-semibold mb-3"},"Bloques",-1)),e("table",Ze,[e("thead",He,[e("tr",null,[t[27]||(t[27]=e("th",{class:"text-left py-1 pr-2"},"Nombre",-1)),t[28]||(t[28]=e("th",{class:"text-left py-1 pr-2"},"Semanas",-1)),t[29]||(t[29]=e("th",{class:"text-left py-1 pr-2"},"Activo",-1)),n.value?(s(),r("th",je,"Acciones")):l("",!0)])]),e("tbody",null,[(s(!0),r(u,null,p(E.value,o=>(s(),r("tr",{key:o.id,class:"border-t border-border/40"},[e("td",Pe,i(o.nombre),1),e("td",Le,i(o.semanas),1),e("td",Te,i(o.activo?"Si":"No"),1),n.value?(s(),r("td",Ie,[e("button",{type:"button",class:"text-[11px] text-red-600 underline",onClick:a=>h(`/catalogos/bloques/${o.id}`,"este bloque"),title:"Eliminar"},t[30]||(t[30]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 text-red-600"},[e("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12ZM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4Z"})],-1)]),8,$e)])):l("",!0)]))),128))])]),n.value?(s(),r("form",{key:0,class:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",onSubmit:t[2]||(t[2]=f(o=>c("/catalogos/bloques","post",{nombre:o.target.nombre.value,semanas:o.target.semanas.value,activo:o.target.activo.checked}),["prevent"]))},t[31]||(t[31]=[e("input",{name:"nombre",placeholder:"Nombre",class:"border border-border rounded px-2 py-1"},null,-1),e("input",{name:"semanas",type:"number",min:"1",max:"20",placeholder:"Semanas",class:"border border-border rounded px-2 py-1"},null,-1),e("label",{class:"inline-flex items-center gap-1 text-[11px]"},[e("input",{name:"activo",type:"checkbox",checked:"",class:"border-border"}),x(" Activo ")],-1),e("div",{class:"sm:col-span-3 flex justify-end mt-2"},[e("button",{type:"submit",class:"px-3 py-1 rounded bg-primary text-primary-foreground text-xs hover:opacity-90"}," Guardar bloque ")],-1)]),32)):l("",!0)])):y.value==="areas"?(s(),r("div",De,[t[37]||(t[37]=e("h2",{class:"text-sm font-semibold mb-3"},"Áreas",-1)),e("table",Ge,[e("thead",Qe,[e("tr",null,[t[33]||(t[33]=e("th",{class:"text-left py-1 pr-2"},"Nombre",-1)),t[34]||(t[34]=e("th",{class:"text-left py-1 pr-2"},"Activo",-1)),n.value?(s(),r("th",Ue,"Acciones")):l("",!0)])]),e("tbody",null,[(s(!0),r(u,null,p(_.value,o=>(s(),r("tr",{key:o.id,class:"border-t border-border/40"},[e("td",Fe,i(o.nombre),1),e("td",ze,i(o.activo?"Si":"No"),1),n.value?(s(),r("td",We,[e("button",{type:"button",class:"text-[11px] text-red-600 underline",onClick:a=>h(`/catalogos/areas/${o.id}`,"esta area"),title:"Eliminar"},t[35]||(t[35]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 text-red-600"},[e("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12ZM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4Z"})],-1)]),8,Je)])):l("",!0)]))),128))])]),n.value?(s(),r("form",{key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs",onSubmit:t[3]||(t[3]=f(o=>c("/catalogos/areas","post",{nombre:o.target.nombre.value,activo:o.target.activo.checked}),["prevent"]))},t[36]||(t[36]=[e("input",{name:"nombre",placeholder:"Nombre",class:"border border-border rounded px-2 py-1"},null,-1),e("label",{class:"inline-flex items-center gap-1 text-[11px]"},[e("input",{name:"activo",type:"checkbox",checked:"",class:"border-border"}),x(" Activo ")],-1),e("div",{class:"sm:col-span-2 flex justify-end mt-2"},[e("button",{type:"submit",class:"px-3 py-1 rounded bg-primary text-primary-foreground text-xs hover:opacity-90"}," Guardar A?rea ")],-1)]),32)):l("",!0)])):y.value==="periodos"?(s(),r("div",Ke,[t[46]||(t[46]=e("h2",{class:"text-sm font-semibold mb-3"},"Períodos académicos",-1)),e("table",Xe,[e("thead",Ye,[e("tr",null,[t[38]||(t[38]=e("th",{class:"text-left py-1 pr-2"},"Periodo",-1)),t[39]||(t[39]=e("th",{class:"text-left py-1 pr-2"},"Inicio",-1)),t[40]||(t[40]=e("th",{class:"text-left py-1 pr-2"},"Fin",-1)),t[41]||(t[41]=e("th",{class:"text-left py-1 pr-2"},"Estado",-1)),n.value?(s(),r("th",et,"Acciones")):l("",!0)])]),e("tbody",null,[(s(!0),r(u,null,p(L.value,o=>(s(),r("tr",{key:o.id,class:"border-t border-border/40"},[e("td",tt,i(o.codigo),1),e("td",ot,i(M(o.inicio)),1),e("td",st,i(M(o.fin)),1),e("td",rt,[n.value?(s(),r("form",{key:0,class:"flex items-center gap-2",onSubmit:f(a=>c(`/catalogos/periodos/${o.id}`,"put",{codigo:a.target.codigo.value,inicio:N(o.inicio),fin:N(o.fin),estado:a.target.estado.value}),["prevent"])},[e("input",{name:"codigo",class:"border border-border rounded px-2 py-1 text-[11px]",value:o.codigo},null,8,lt),e("select",{name:"estado",class:"border border-border rounded px-2 py-1 text-[11px]",value:o.estado},t[42]||(t[42]=[e("option",{value:"ABIERTO"},"ABIERTO",-1),e("option",{value:"CERRADO"},"CERRADO",-1)]),8,at),t[43]||(t[43]=e("button",{type:"submit",class:"px-2 py-1 rounded bg-primary text-primary-foreground text-[11px] hover:opacity-90"}," Actualizar ",-1))],40,dt)):(s(),r("span",it,i(o.estado),1))]),n.value?(s(),r("td",nt,[e("button",{type:"button",class:"text-[11px] text-red-600 underline",onClick:a=>h(`/catalogos/periodos/${o.id}`,"este periodo"),title:"Eliminar"},t[44]||(t[44]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 text-red-600"},[e("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12ZM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4Z"})],-1)]),8,ut)])):l("",!0)]))),128))])]),n.value?(s(),r("form",{key:0,class:"grid grid-cols-1 sm:grid-cols-4 gap-2 text-xs",onSubmit:t[4]||(t[4]=f(o=>c("/catalogos/periodos","post",{codigo:o.target.codigo.value,inicio:o.target.inicio.value,fin:o.target.fin.value,estado:o.target.estado.value}),["prevent"]))},t[45]||(t[45]=[e("input",{name:"codigo",placeholder:"Periodo (ej: 2025-II)",class:"border border-border rounded px-2 py-1"},null,-1),e("input",{name:"inicio",type:"date",class:"border border-border rounded px-2 py-1"},null,-1),e("input",{name:"fin",type:"date",class:"border border-border rounded px-2 py-1"},null,-1),e("select",{name:"estado",class:"border border-border rounded px-2 py-1"},[e("option",{value:"ABIERTO"},"ABIERTO"),e("option",{value:"CERRADO"},"CERRADO")],-1),e("div",{class:"sm:col-span-4 flex justify-end mt-2"},[e("button",{type:"submit",class:"px-3 py-1 rounded bg-primary text-primary-foreground text-xs hover:opacity-90"}," Guardar período ")],-1)]),32)):l("",!0)])):y.value==="tipos"?(s(),r("div",pt,[t[52]||(t[52]=e("h2",{class:"text-sm font-semibold mb-3"},"Tipos de evidencia",-1)),e("table",ct,[e("thead",mt,[e("tr",null,[t[47]||(t[47]=e("th",{class:"text-left py-1 pr-2"},"Nombre",-1)),t[48]||(t[48]=e("th",{class:"text-left py-1 pr-2"},"Cuenta en avance",-1)),t[49]||(t[49]=e("th",{class:"text-left py-1 pr-2"},"Activo",-1)),n.value?(s(),r("th",bt,"Acciones")):l("",!0)])]),e("tbody",null,[(s(!0),r(u,null,p(q.value,o=>(s(),r("tr",{key:o.id,class:"border-t border-border/40"},[e("td",xt,i(o.nombre),1),e("td",vt,i(o.cuenta_en_avance?"Si":"No"),1),e("td",yt,i(o.activo?"Si":"No"),1),n.value?(s(),r("td",gt,[e("button",{type:"button",class:"text-[11px] text-red-600 underline",onClick:a=>h(`/catalogos/tipos-evidencia/${o.id}`,"este tipo"),title:"Eliminar"},t[50]||(t[50]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 text-red-600"},[e("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12ZM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4Z"})],-1)]),8,ft)])):l("",!0)]))),128))])]),n.value?(s(),r("form",{key:0,class:"grid grid-cols-1 sm:grid-cols-[1.6fr_1fr_0.6fr_0.4fr] gap-2 text-xs items-center",onSubmit:t[5]||(t[5]=f(o=>c("/catalogos/tipos-evidencia","post",{nombre:o.target.nombre.value,cuenta_en_avance:o.target.cuenta_en_avance.checked,activo:o.target.activo.checked}),["prevent"]))},t[51]||(t[51]=[e("input",{name:"nombre",placeholder:"Nombre",class:"border border-border rounded px-2 py-1"},null,-1),e("label",{class:"inline-flex items-center gap-1 text-[11px]"},[e("input",{name:"cuenta_en_avance",type:"checkbox",checked:"",class:"border-border"}),x(" Cuenta en avance ")],-1),e("label",{class:"inline-flex items-center gap-1 text-[11px]"},[e("input",{name:"activo",type:"checkbox",checked:"",class:"border-border"}),x(" Activo ")],-1),e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"px-3 py-1 rounded bg-primary text-primary-foreground text-xs hover:opacity-90"}," Guardar tipo ")],-1)]),32)):l("",!0)])):y.value==="especialidades"?(s(),r("div",ht,[t[57]||(t[57]=e("h2",{class:"text-sm font-semibold mb-3"},"Especialidades",-1)),e("table",_t,[e("thead",kt,[e("tr",null,[t[53]||(t[53]=e("th",{class:"text-left py-1 pr-2"},"Nombre",-1)),n.value?(s(),r("th",wt,"Acciones")):l("",!0)])]),e("tbody",null,[(s(!0),r(u,null,p(T.value,o=>(s(),r("tr",{key:o.id,class:"border-t border-border/40"},[e("td",Ct,i(o.nombre),1),n.value?(s(),r("td",qt,[e("button",{type:"button",class:"text-[11px] text-primary underline mr-2",onClick:a=>$(o),title:"Editar"},t[54]||(t[54]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 text-primary"},[e("path",{d:"M5 18.75V21h2.25l9.67-9.67-2.25-2.25L5 18.75Zm13.71-11.04a.996.996 0 0 0 0-1.41l-2.01-2.01a.996.996 0 0 0-1.41 0l-1.5 1.5 3.75 3.75 1.17-1.83Z"})],-1)]),8,Et),e("button",{type:"button",class:"text-[11px] text-red-600 underline",onClick:a=>D(o),title:"Eliminar"},t[55]||(t[55]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 text-red-600"},[e("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12ZM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4Z"})],-1)]),8,At)])):l("",!0)]))),128))])]),n.value?(s(),r("form",{key:0,class:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs",onSubmit:t[6]||(t[6]=f(o=>c("/catalogos/especialidades","post",{nombre:o.target.nombre.value}),["prevent"]))},t[56]||(t[56]=[e("input",{name:"nombre",placeholder:"Nombre",class:"border border-border rounded px-2 py-1"},null,-1),e("div",{class:"sm:col-span-2 flex justify-end mt-2"},[e("button",{type:"submit",class:"px-3 py-1 rounded bg-primary text-primary-foreground text-xs hover:opacity-90"}," Guardar especialidad ")],-1)]),32)):l("",!0)])):(s(),r("div",St,[t[71]||(t[71]=e("h2",{class:"text-sm font-semibold mb-3"},"Requisitos por modalidad",-1)),e("div",Bt,[t[58]||(t[58]=x(" Total peso configurado: ")),e("span",Mt,i(S.value),1),S.value!==100?(s(),r("span",Nt," ⚠️ El total no es 100. ")):l("",!0)]),B.value.length?(s(),r("div",Ot,[(s(!0),r(u,null,p(B.value,o=>(s(),r("div",{key:o.nombre,class:"text-muted-foreground"},[x(i(o.nombre)+": ",1),e("span",Vt,i(o.total),1),o.total!==100?(s(),r("span",Rt,"⚠️")):l("",!0)]))),128))])):l("",!0),t[72]||(t[72]=e("div",{class:"mb-4 rounded border border-dashed border-border/60 bg-muted/30 p-3 text-xs"},[e("div",{class:"font-medium mb-1"},"Ejemplo de cálculo"),e("div",null,"Si un requisito tiene Mínimo 4 y Peso 30, y entregas 2:"),e("div",{class:"mt-1"},"cumplimiento = min(2/4, 1) = 0.5"),e("div",null,"aporte = 0.5 x 30 = 15"),e("div",{class:"mt-1 text-muted-foreground"}," Si aplica a POR_BLOQUE, se promedia el cumplimiento de Bloque A y Bloque B. ")],-1)),k.value.length?l("",!0):(s(),r("div",Zt," Configura requisitos para que el avance sea automático. ")),e("table",Ht,[e("thead",jt,[e("tr",null,[t[59]||(t[59]=e("th",{class:"text-left py-1 pr-2"},"Modalidad",-1)),t[60]||(t[60]=e("th",{class:"text-left py-1 pr-2"},"Tipo evidencia",-1)),t[61]||(t[61]=e("th",{class:"text-left py-1 pr-2"},[x(" Mínimo "),e("span",{class:"ml-1 cursor-help text-muted-foreground",title:"Cantidad mínima de entregables requeridos."},"ℹ️")],-1)),t[62]||(t[62]=e("th",{class:"text-left py-1 pr-2"},[x(" Peso "),e("span",{class:"ml-1 cursor-help text-muted-foreground",title:"Contribución (%) de este requisito al avance total."},"ℹ️")],-1)),t[63]||(t[63]=e("th",{class:"text-left py-1 pr-2"},[x(" Aplica a "),e("span",{class:"ml-1 cursor-help text-muted-foreground",title:"CICLO = todo el curso. POR_BLOQUE = promedio entre bloques."},"ℹ️")],-1)),n.value?(s(),r("th",Pt,"Acciones")):l("",!0)])]),e("tbody",null,[(s(!0),r(u,null,p(k.value,o=>{var a,m;return s(),r("tr",{key:o.id,class:"border-t border-border/40"},[e("td",Lt,i(((a=o.modalidad)==null?void 0:a.nombre)??"—"),1),e("td",Tt,i(((m=o.tipo)==null?void 0:m.nombre)??"—"),1),e("td",It,i(o.minimo),1),e("td",$t,i(o.peso),1),e("td",Dt,i(o.aplica_a??"CICLO"),1),n.value?(s(),r("td",Gt,[e("button",{type:"button",class:"text-[11px] text-red-600 underline",onClick:g=>h(`/catalogos/requisitos/${o.id}`,"este requisito"),title:"Eliminar"},t[64]||(t[64]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4 text-red-600"},[e("path",{d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12ZM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4Z"})],-1)]),8,Qt)])):l("",!0)])}),128))])]),n.value?(s(),r("form",{key:2,class:"grid grid-cols-1 sm:grid-cols-5 gap-2 text-xs",onSubmit:t[7]||(t[7]=f(o=>c("/catalogos/requisitos","post",{modalidad_id:o.target.modalidad_id.value,tipo_evidencia_id:o.target.tipo_evidencia_id.value,minimo:o.target.minimo.value,peso:o.target.peso.value,aplica_a:o.target.aplica_a.value}),["prevent"]))},[e("select",Ut,[t[65]||(t[65]=e("option",{value:""},"Modalidad…",-1)),(s(!0),r(u,null,p(C.value,o=>(s(),r("option",{key:o.id,value:o.id},i(o.nombre),9,Ft))),128))]),e("select",zt,[t[66]||(t[66]=e("option",{value:""},"Tipo evidencia…",-1)),(s(!0),r(u,null,p(q.value,o=>(s(),r("option",{key:o.id,value:o.id},i(o.nombre),9,Wt))),128))]),t[67]||(t[67]=e("select",{name:"aplica_a",class:"border border-border rounded px-2 py-1"},[e("option",{value:"CICLO"},"CICLO"),e("option",{value:"POR_BLOQUE"},"POR_BLOQUE")],-1)),t[68]||(t[68]=e("input",{name:"minimo",type:"number",min:"0",class:"border border-border rounded px-2 py-1",placeholder:"Mínimo"},null,-1)),t[69]||(t[69]=e("input",{name:"peso",type:"number",min:"0",max:"100",class:"border border-border rounded px-2 py-1",placeholder:"Peso %"},null,-1)),t[70]||(t[70]=e("div",{class:"sm:col-span-5 flex justify-end mt-2"},[e("button",{type:"submit",class:"px-3 py-1 rounded bg-primary text-primary-foreground text-xs hover:opacity-90"}," Guardar requisito ")],-1))],32)):l("",!0)]))])]),_:1}))}});export{oo as default};
